#!/usr/bin/env -S Rscript --vanilla

library(scribe)

params <-
  command_args() $
  add_argument(
    "--cache",
    action = "flag",
    default = TRUE,
    info = "cache_clean()"
  ) $
  add_argument(
    "--meta",
    action = "flag",
    default = TRUE,
    info = "meta_clean()"
  ) $
  add_argument(
    "--remove",
    action = "flag",
    default = FALSE,
    info = "remove {pak}"
  ) $
  parse()

if (params$cache) {
  message("i cleaning cache")
  pak::cache_clean()
}

if (params$meta) {
  message("i cleaning meta")
  pak::meta_clean(force = TRUE)
}

if (params$remove) {
  message("i removing pak")
  utils::remove.packages("pak")
}

message("i done")
quit()
